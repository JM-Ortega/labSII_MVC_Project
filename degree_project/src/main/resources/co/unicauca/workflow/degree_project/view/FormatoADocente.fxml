<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<AnchorPane prefHeight="700.0" prefWidth="950.0" styleClass="root-white" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="co.unicauca.workflow.degree_project.presentation.FormatoADocenteController">

    <!-- Cargar stylesheet local -->


    <children>
        <VBox spacing="16.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">

            <!-- Header -->
            <HBox spacing="12.0" styleClass="header">
                <Text styleClass="title" text="Formato A / Docente">
                    <font>
                        <Font size="24.0" />
                    </font>
                </Text>

                <Pane HBox.hgrow="ALWAYS" />

                <HBox alignment="CENTER_LEFT" spacing="8.0">
                    <ImageView fitHeight="40.0" fitWidth="40.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@../images/iconUsuario.png" />
                        </image>
                    </ImageView>
                    <VBox spacing="2.0">
                        <Label fx:id="nombreDocente" styleClass="label-strong" text="Docente" />
                        <Label text="Docente" />
                    </VBox>
                </HBox>
            </HBox>

            <!-- Barra de acciones -->
            <HBox spacing="10.0" styleClass="section">
                <Button fx:id="btnIniciarNuevoProyecto" onAction="#onIniciarNuevoProyecto" text="Iniciar nuevo proyecto" />
                <Label fx:id="lblCupoDocente" styleClass="label-muted" text="" />
                <Pane HBox.hgrow="ALWAYS" />
                <TextField fx:id="txtBuscar" prefWidth="260.0" promptText="Buscar por título o estudiante..." />
                <Button fx:id="btnRefrescar" onAction="#onRefrescar" text="Refrescar" />
            </HBox>

            <!-- Panel NUEVO PROYECTO (RF-2) -->
            <TitledPane fx:id="pnNuevoProyecto" expanded="true" managed="false" text="Nuevo proyecto" visible="false">
                <content>
                    <VBox spacing="12.0" styleClass="section">
                        <VBox spacing="8.0">

                            <!-- Estudiante -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Label minWidth="130.0" text="ID estudiante:" />
                                <TextField fx:id="txtEstudianteId" prefWidth="280.0" promptText="UUID del estudiante" />
                                <Button fx:id="btnBuscarEstudiante" onAction="#onBuscarEstudiante" text="Buscar" />
                                <Label fx:id="lblEstudianteNombre" styleClass="label-success" text="" />
                            </HBox>

                            <!-- Título -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Label minWidth="130.0" text="Título del proyecto:" />
                                <TextField fx:id="txtTitulo" promptText="Ingrese el título del proyecto" HBox.hgrow="ALWAYS" />
                            </HBox>

                            <!-- Tipo de trabajo de grado -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Label minWidth="130.0" text="Tipo de trabajo:" />
                                <ComboBox fx:id="cbTipoTrabajo" prefWidth="280.0" promptText="Seleccione..." />
                                <Label styleClass="label-muted" text="* Tesis: solo Formato A; Práctica: Formato A + Carta." />
                            </HBox>

                            <!-- Formato A -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Label minWidth="130.0" text="Formato A (PDF):" />
                                <Button fx:id="btnSeleccionarPdf" onAction="#onSeleccionarPdf" text="Seleccionar PDF..." />
                                <Label fx:id="lblPdfNombre" styleClass="label-muted" text="Ningún archivo seleccionado" />
                            </HBox>

                            <!-- Carta de aceptación (solo para Práctica/Trabajo de grado) -->
                            <HBox fx:id="rowCarta" alignment="CENTER_LEFT" managed="false" spacing="8.0" visible="false">
                                <Label minWidth="130.0" text="Carta aceptación (PDF):" />
                                <Button fx:id="btnSeleccionarCarta" onAction="#onSeleccionarCarta" text="Seleccionar PDF..." />
                                <Label fx:id="lblCartaNombre" styleClass="label-muted" text="Ningún archivo seleccionado" />
                            </HBox>

                            <!-- Acciones -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Button fx:id="btnCrearProyecto" onAction="#onCrearProyecto" text="Crear proyecto" />
                                <Button fx:id="btnCancelarNuevo" onAction="#onCancelarNuevo" text="Cancelar" />
                                <Label fx:id="lblNuevoProyectoMsg" styleClass="label-error" text="" />
                            </HBox>
                        </VBox>
                    </VBox>
                </content>
            </TitledPane>


            <!-- Tabla de proyectos del docente -->
            <VBox spacing="8.0" VBox.vgrow="ALWAYS">
                <Label styleClass="subtitle" text="Mis proyectos de grado">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font></Label>
            <Button fx:id="btnVerEstadisticas" mnemonicParsing="false" onAction="#onVerEstadisticas" text="Ver Estadisticas" />
                <TableView fx:id="tblProyectos" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colTitulo" prefWidth="280.0" text="Título" />
                        <TableColumn fx:id="colEstudiante" prefWidth="200.0" text="Estudiante" />
                        <TableColumn fx:id="colVersion" prefWidth="160.0" text="Versión Formato A" />
                        <TableColumn fx:id="colEstadoProyecto" prefWidth="160.0" text="Estado del proyecto" />
                        <TableColumn fx:id="colAccion" prefWidth="140.0" text="Acción" />
                    </columns>
                </TableView>
                <Label fx:id="lblTablaMsg" styleClass="label-error" text="" />
            </VBox>
        </VBox>
    </children>
</AnchorPane>
