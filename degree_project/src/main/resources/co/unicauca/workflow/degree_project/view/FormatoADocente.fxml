<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>
<AnchorPane xmlns="http://javafx.com/javafx/21.0.3"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.unicauca.workflow.degree_project.presentation.FormatoADocenteController"
            prefWidth="950.0" prefHeight="700.0"
            styleClass="root-white"
            stylesheets="@../styles/FormatoADocente.css">

    <children>
        <VBox spacing="16.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">

            <!-- Header -->
            <HBox spacing="12.0" styleClass="header">
                <Text styleClass="title" text="Formato A / Docente">
                    <font>
                        <Font size="24.0" />
                    </font>
                </Text>
                <Pane HBox.hgrow="ALWAYS"/>
                <HBox spacing="8.0" alignment="CENTER_LEFT">
                    <ImageView fitHeight="40.0" fitWidth="40.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@../images/iconUsuario.png" />
                        </image>
                    </ImageView>
                    <VBox spacing="2.0">
                        <Label fx:id="nombreDocente" styleClass="label-strong" text="Docente" />
                        <Label text="Docente" />
                    </VBox>
                </HBox>
            </HBox>

            <!-- Barra de acciones -->
            <HBox spacing="10.0" styleClass="section">
                <Button fx:id="btnIniciarNuevoProyecto" text="Iniciar nuevo proyecto"
                        onAction="#onIniciarNuevoProyecto"/>
                <Label fx:id="lblCupoDocente" text="" styleClass="label-muted"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <TextField fx:id="txtBuscar" promptText="Buscar por título, nombre o correo..." prefWidth="280.0"/>
                <Button fx:id="btnRefrescar" text="Refrescar" onAction="#onRefrescar"/>
            </HBox>

            <!-- Panel NUEVO PROYECTO -->
            <TitledPane fx:id="pnNuevoProyecto" text="Nuevo proyecto" expanded="true" visible="false" managed="false">
                <content>
                    <VBox spacing="12.0" styleClass="section">
                        <VBox spacing="8.0">

                            <!-- Estudiante -->
                            <HBox spacing="8.0" alignment="CENTER_LEFT">
                                <Label text="Correo estudiante:" minWidth="150.0"/>
                                <TextField fx:id="txtEstudianteCorreo" promptText="correo institucional"
                                           prefWidth="300.0"/>
                                <Button fx:id="btnBuscarEstudiante" text="Buscar" onAction="#onBuscarEstudiante"/>
                                <Label fx:id="lblEstudianteNombre" text="" styleClass="label-success"/>
                            </HBox>

                            <!-- Título -->
                            <HBox spacing="8.0" alignment="CENTER_LEFT">
                                <Label text="Título del proyecto:" minWidth="150.0"/>
                                <TextField fx:id="txtTitulo" promptText="Ingrese el título del proyecto"
                                           HBox.hgrow="ALWAYS"/>
                            </HBox>

                            <!-- Tipo -->
                            <HBox spacing="8.0" alignment="CENTER_LEFT">
                                <Label text="Tipo de trabajo:" minWidth="150.0"/>
                                <ComboBox fx:id="cbTipoTrabajo" promptText="Seleccione..." prefWidth="300.0"/>
                                <Label text="* Tesis: solo Formato A · Práctica: Formato A + Carta."
                                       styleClass="label-muted"/>
                            </HBox>

                            <!-- Formato A -->
                            <HBox spacing="8.0" alignment="CENTER_LEFT">
                                <Label text="Formato A (PDF):" minWidth="150.0"/>
                                <Button fx:id="btnSeleccionarPdf" text="Seleccionar PDF..."
                                        onAction="#onSeleccionarPdf"/>
                                <Label fx:id="lblPdfNombre" text="Ningún archivo seleccionado"
                                       styleClass="label-muted"/>
                            </HBox>

                            <!-- Carta (solo práctica) -->
                            <HBox fx:id="rowCarta" spacing="8.0" alignment="CENTER_LEFT" visible="false"
                                  managed="false">
                                <Label text="Carta aceptación (PDF):" minWidth="150.0"/>
                                <Button fx:id="btnSeleccionarCarta" text="Seleccionar PDF..."
                                        onAction="#onSeleccionarCarta"/>
                                <Label fx:id="lblCartaNombre" text="Ningún archivo seleccionado"
                                       styleClass="label-muted"/>
                            </HBox>

                            <!-- Acciones -->
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <Button fx:id="btnCrearProyecto" onAction="#onCrearProyecto" text="Crear proyecto" />
                                <Button fx:id="btnCancelarNuevo" onAction="#onCancelarNuevo" text="Cancelar" />
                                <Label fx:id="lblNuevoProyectoMsg" styleClass="label-error" text="" />
                            </HBox>
                        </VBox>
                    </VBox>
                </content>
            </TitledPane>


            <!-- Tabla de proyectos del docente -->
            <VBox spacing="8.0" VBox.vgrow="ALWAYS">
                <Label styleClass="subtitle" text="Mis proyectos de grado">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font></Label>
            <Button fx:id="btnVerEstadisticas" mnemonicParsing="false" onAction="#onVerEstadisticas" text="Ver Estadisticas" />
                <TableView fx:id="tblProyectos" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colTitulo" text="Título" prefWidth="260.0"/>
                        <TableColumn fx:id="colEstudianteNombre" text="Estudiante" prefWidth="180.0"/>
                        <TableColumn fx:id="colEstudianteCorreo" text="Correo" prefWidth="220.0"/>
                        <TableColumn fx:id="colVersion" text="Versión Formato A" prefWidth="150.0"/>
                        <TableColumn fx:id="colEstadoProyecto" text="Estado del proyecto" prefWidth="160.0"/>
                        <TableColumn fx:id="colAccion" text="Acción" prefWidth="140.0"/>
                    </columns>
                </TableView>
                <Label fx:id="lblTablaMsg" styleClass="label-error" text="" />
            </VBox>
        </VBox>
    </children>
</AnchorPane>
